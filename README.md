# Canducci SqlKata Dapper

[![Version](https://img.shields.io/nuget/v/Canducci.SqlKata.Dapper.svg?style=plastic&label=version)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper/)
[![NuGet](https://img.shields.io/nuget/dt/Canducci.SqlKata.Dapper.svg)](https://Canducci.SqlKata.Dapper)
[![Build Status](https://travis-ci.org/fulviocanducci/Canducci.SqlKata.Dapper.svg?branch=master)](https://travis-ci.org/fulviocanducci/Canducci.SqlKata.Dapper)

[![Canducci SqlKata Dapper](http://i1194.photobucket.com/albums/aa377/netdragoon1/abcdef_zpsh8xp8c88.png)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper/)



The package was developed to execute SQL commands in an interactive way, package composed of [SqlKata](https://www.nuget.org/packages/SqlKata/) for generation of SQL and [Dapper](https://www.nuget.org/packages/Dapper/) for execution of SQL that were generated by [SqlKata](https://www.nuget.org/packages/SqlKata/).

The base class of the [Canducci SqlKata Dapper](https://www.nuget.org/packages/Canducci.SqlKata.Dapper/) generates the SQL and then executes them with methods that relate and join the facility in writing SQL plus execution itself.

This package follows the same trend in the generation of [SqlKata](https://www.nuget.org/packages/SqlKata/) that for the moment generates SQL for three types of database manager systems that are: **MySQL**, **Postgresql** and **SqlServer**.

## Installation

##### _MySQL:_

[![Version](https://img.shields.io/nuget/v/Canducci.SqlKata.Dapper.MySql.svg?style=plastic&label=version)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.MySql/)
[![NuGet](https://img.shields.io/nuget/dt/Canducci.SqlKata.Dapper.MySql.svg)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.MySql/)

```
> Install-Package Canducci.SqlKata.Dapper.MySql
```

##### _Postgresql_

[![Version](https://img.shields.io/nuget/v/Canducci.SqlKata.Dapper.Postgres.svg?style=plastic&label=version)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.Postgres/)
[![NuGet](https://img.shields.io/nuget/dt/Canducci.SqlKata.Dapper.Postgres.svg)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.Postgres/)

```
> Install-Package Canducci.SqlKata.Dapper.Postgres
```

##### _SqlServer_

[![Version](https://img.shields.io/nuget/v/Canducci.SqlKata.Dapper.SqlServer.svg?style=plastic&label=version)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.SqlServer/)
[![NuGet](https://img.shields.io/nuget/dt/Canducci.SqlKata.Dapper.SqlServer.svg)](https://www.nuget.org/packages/Canducci.SqlKata.Dapper.SqlServer/)

```
> Install-Package Canducci.SqlKata.Dapper.SqlServer
```


## How to use?

Add the two namespace:
```
 using Canducci.SqlKata.Dapper.Extensions.Builder
 using Canducci.SqlKata.Dapper.SqlServer;
```

Create a connection for example with SqlServer and use it as follows.

#### Insert

```
string strConnection = "Server=.\\SqlExpress;Database=QueryBuilderDatabase;User Id=sa;Password=senha;";
using(SqlConnection connection = new SqlConnection(strConnection))
{
	var result = connection
		.Build()
		.From("People")
		.Insert(new Dictionary<string, object> 
		{
			["Name"] = Guid.NewGuid().ToString(),
			["Created"] = DateTime.Now.AddDays(-1000),
			["Active"] = true
		})
		.Execute();

	if (result == 1)  // Saved successfully
	{  		
	}
}
```

#### Update

```
string strConnection = "Server=.\\SqlExpress;Database=QueryBuilderDatabase;User Id=sa;Password=senha;";
using(SqlConnection connection = new SqlConnection(strConnection))
{
	var result = connection
		.Build()
		.From("People")
		.Update(new Dictionary<string, object> 
		{			
			["Active"] = false
		})
		.Where("Id", 1)
		.Execute();

	if (result == 1) // Updated successfully
	{      		
	}
}
```

#### Delete

```
string strConnection = "Server=.\\SqlExpress;Database=QueryBuilderDatabase;User Id=sa;Password=senha;";
using(SqlConnection connection = new SqlConnection(strConnection))
{
	var result = connection
		.Build()
		.From("People")                   
		.Where("Id", 1)
		.Delete()
		.Execute();

	if (result == 1) // Deleted successfully
	{      	
	}
}

```

#### Select

_Base Class:_

```
public class People 
{
	public int Id { get; set; } 
	public string Name { get; set; }
	public System.DateTime Created { get; set; }
	public bool Active { get; set; } = true;
}
```

_List of People:_  (`IEnumerable<People>`)

```
string strConnection = "Server=.\\SqlExpress;Database=QueryBuilderDatabase;User Id=sa;Password=senha;";
using(SqlConnection connection = new SqlConnection(strConnection))
{
	IEnumerable<People> result = connection
		.Build()
		.From("People")                   
		.Query<People>();	
}
```

_First of People:_  (`People`)

```
string strConnection = "Server=.\\SqlExpress;Database=QueryBuilderDatabase;User Id=sa;Password=senha;";
using(SqlConnection connection = new SqlConnection(strConnection))
{
	People result = connection
		.Build()
		.From("People")                   
		.Where("Id", 2)
		.QueryFirst<People>();
	
}
```

## Related links

- [SqlKata](https://sqlkata.com/)
- [Docs SqlKata](https://sqlkata.com/docs)
- [github: sqlkata/querybuilder](https://github.com/sqlkata/querybuilder)

